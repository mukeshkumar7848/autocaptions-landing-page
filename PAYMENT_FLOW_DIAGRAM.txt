
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                   AUTO CAPTIONS PRO - PAYMENT FLOW                        â•‘
â•‘                      (Updated with Order Creation)                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. USER VISITS GETPRO.HTML                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â”‚ Page loads
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. GEOLOCATION DETECTION (ipapi.co)                                     â”‚
â”‚                                                                          â”‚
â”‚    ğŸ‡®ğŸ‡³ India      â†’ Show "Get Pro Now" â†’ Razorpay (â‚¹1)                  â”‚
â”‚    ğŸŒ Other      â†’ Show "Get Pro Now" â†’ Gumroad ($49)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â”‚ User clicks button
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. FRONTEND: CREATE ORDER API CALL                                      â”‚
â”‚                                                                          â”‚
â”‚    POST https://limit-henna.vercel.app/api/razorpay/create-order       â”‚
â”‚                                                                          â”‚
â”‚    Request:                                                             â”‚
â”‚    {                                                                    â”‚
â”‚      "amount": 100,              // â‚¹1 in paise                        â”‚
â”‚      "currency": "INR",                                                 â”‚
â”‚      "receipt": "receipt_1234567890",                                   â”‚
â”‚      "notes": {                                                         â”‚
â”‚        "product": "Auto Captions Pro",                                  â”‚
â”‚        "type": "lifetime_license"                                       â”‚
â”‚      }                                                                  â”‚
â”‚    }                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â”‚ API call
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. SERVER: CREATE RAZORPAY ORDER                                        â”‚
â”‚                                                                          â”‚
â”‚    const razorpay = new Razorpay({                                      â”‚
â”‚      key_id: process.env.RAZORPAY_KEY_ID,                              â”‚
â”‚      key_secret: process.env.RAZORPAY_KEY_SECRET                        â”‚
â”‚    });                                                                  â”‚
â”‚                                                                          â”‚
â”‚    const order = await razorpay.orders.create({ ... });                â”‚
â”‚                                                                          â”‚
â”‚    Response:                                                            â”‚
â”‚    {                                                                    â”‚
â”‚      "success": true,                                                   â”‚
â”‚      "order_id": "order_MgZWdTbqT3I9Vz",                               â”‚
â”‚      "amount": 100,                                                     â”‚
â”‚      "currency": "INR",                                                 â”‚
â”‚      "key_id": "rzp_live_SDwg3Ie2duu2Z3"                               â”‚
â”‚    }                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â”‚ Order created
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. FRONTEND: OPEN RAZORPAY CHECKOUT                                     â”‚
â”‚                                                                          â”‚
â”‚    const razorpay = new Razorpay({                                      â”‚
â”‚      key: order_data.key_id,                                            â”‚
â”‚      amount: order_data.amount,                                         â”‚
â”‚      order_id: order_data.order_id,                                     â”‚
â”‚      handler: function(response) { ... }                                â”‚
â”‚    });                                                                  â”‚
â”‚                                                                          â”‚
â”‚    razorpay.open();                                                     â”‚
â”‚                                                                          â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚    â”‚   RAZORPAY PAYMENT MODAL              â”‚                           â”‚
â”‚    â”‚                                       â”‚                           â”‚
â”‚    â”‚   ğŸ’³ Enter card details:              â”‚                           â”‚
â”‚    â”‚   4111 1111 1111 1111                 â”‚                           â”‚
â”‚    â”‚   CVV: 123                            â”‚                           â”‚
â”‚    â”‚   Expiry: 12/28                       â”‚                           â”‚
â”‚    â”‚                                       â”‚                           â”‚
â”‚    â”‚   ğŸ“§ Email: user@example.com          â”‚                           â”‚
â”‚    â”‚   ğŸ“± Phone: 9876543210                â”‚                           â”‚
â”‚    â”‚                                       â”‚                           â”‚
â”‚    â”‚   [Pay â‚¹1]                            â”‚                           â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â”‚ User submits payment
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. RAZORPAY PROCESSES PAYMENT                                           â”‚
â”‚                                                                          â”‚
â”‚    ğŸ”’ Card validated                                                    â”‚
â”‚    ğŸ’° Amount charged: â‚¹1                                                â”‚
â”‚    âœ… Payment captured                                                  â”‚
â”‚                                                                          â”‚
â”‚    Returns to frontend:                                                 â”‚
â”‚    {                                                                    â”‚
â”‚      "razorpay_payment_id": "pay_MgZaFu5j6SbC8K",                      â”‚
â”‚      "razorpay_order_id": "order_MgZWdTbqT3I9Vz",                      â”‚
â”‚      "razorpay_signature": "abc123xyz...",                              â”‚
â”‚      "email": "user@example.com",                                       â”‚
â”‚      "contact": "9876543210"                                            â”‚
â”‚    }                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚                                   â”‚
                 â–¼                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7A. FRONTEND: INSTANT RESPONSE â”‚  â”‚ 7B. RAZORPAY: WEBHOOK TRIGGER  â”‚
â”‚                                â”‚  â”‚                                â”‚
â”‚  âœ… Payment success!           â”‚  â”‚  Razorpay automatically sends  â”‚
â”‚                                â”‚  â”‚  webhook notification to:      â”‚
â”‚  ğŸ”‘ Generate license:          â”‚  â”‚                                â”‚
â”‚     const key =                â”‚  â”‚  POST /api/razorpay/webhook   â”‚
â”‚       generateLicenseKey();    â”‚  â”‚                                â”‚
â”‚                                â”‚  â”‚  With signature for security   â”‚
â”‚  Result:                       â”‚  â”‚                                â”‚
â”‚  ACPRO-A7K9P-2X4Q3-M8N6V-...  â”‚  â”‚                                â”‚
â”‚                                â”‚  â”‚                                â”‚
â”‚  ğŸ’¾ Save to localStorage       â”‚  â”‚                                â”‚
â”‚                                â”‚  â”‚                                â”‚
â”‚  ğŸ¨ Show success modal         â”‚  â”‚                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                                   â”‚
                 â”‚                                   â”‚
                 â”‚                                   â–¼
                 â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚              â”‚ 8. SERVER: VERIFY & PROCESS        â”‚
                 â”‚              â”‚                                    â”‚
                 â”‚              â”‚  ğŸ” Verify signature               â”‚
                 â”‚              â”‚  ğŸ“¦ Extract payment data           â”‚
                 â”‚              â”‚  ğŸ”‘ Generate license key           â”‚
                 â”‚              â”‚  ğŸ’¾ Save to Supabase               â”‚
                 â”‚              â”‚  ğŸ“§ Send email via Resend          â”‚
                 â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                                   â”‚
                 â”‚                                   â”‚
                 â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚              â”‚                                     â”‚
                 â”‚              â–¼                                     â–¼
                 â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  â”‚ 9A. SUPABASE DATABASE â”‚       â”‚ 9B. RESEND EMAIL SERVICE  â”‚
                 â”‚  â”‚                       â”‚       â”‚                           â”‚
                 â”‚  â”‚  Table: licenses      â”‚       â”‚  From: noreply@          â”‚
                 â”‚  â”‚                       â”‚       â”‚        notifications.     â”‚
                 â”‚  â”‚  INSERT:              â”‚       â”‚        mukeshfx.com       â”‚
                 â”‚  â”‚  - license_key        â”‚       â”‚                           â”‚
                 â”‚  â”‚  - email              â”‚       â”‚  To: user@example.com     â”‚
                 â”‚  â”‚  - phone              â”‚       â”‚                           â”‚
                 â”‚  â”‚  - payment_id         â”‚       â”‚  Subject: ğŸ‰ Your License â”‚
                 â”‚  â”‚  - order_id           â”‚       â”‚                           â”‚
                 â”‚  â”‚  - amount             â”‚       â”‚  Body: HTML email with:   â”‚
                 â”‚  â”‚  - status: active     â”‚       â”‚  - License key            â”‚
                 â”‚  â”‚  - activations: 0     â”‚       â”‚  - Activation steps       â”‚
                 â”‚  â”‚  - max_activations: 1 â”‚       â”‚  - Payment details        â”‚
                 â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  - Support link           â”‚
                 â”‚                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 10. USER SEES SUCCESS MODAL                                             â”‚
â”‚                                                                          â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚    â”‚                                                               â”‚   â”‚
â”‚    â”‚                    âœ… Payment Successful! ğŸ‰                  â”‚   â”‚
â”‚    â”‚                                                               â”‚   â”‚
â”‚    â”‚    Thank you for upgrading to Auto Captions Pro!             â”‚   â”‚
â”‚    â”‚                                                               â”‚   â”‚
â”‚    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚    â”‚    â”‚ ğŸ”‘ Your License Key                                 â”‚   â”‚   â”‚
â”‚    â”‚    â”‚                                                     â”‚   â”‚   â”‚
â”‚    â”‚    â”‚ ACPRO-A7K9P-2X4Q3-M8N6V-T5R8W-H3J7M                 â”‚   â”‚   â”‚
â”‚    â”‚    â”‚                                                     â”‚   â”‚   â”‚
â”‚    â”‚    â”‚ [ğŸ“‹ Copy Key]  [ğŸ’¾ Download]                        â”‚   â”‚   â”‚
â”‚    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚    â”‚                                                               â”‚   â”‚
â”‚    â”‚    ğŸ“§ A copy has been sent to your email                     â”‚   â”‚
â”‚    â”‚       Check inbox (and spam folder)                          â”‚   â”‚
â”‚    â”‚                                                               â”‚   â”‚
â”‚    â”‚    ğŸ“‹ Payment Details:                                        â”‚   â”‚
â”‚    â”‚       Payment ID: pay_MgZaFu5j6SbC8K                         â”‚   â”‚
â”‚    â”‚       Order ID: order_MgZWdTbqT3I9Vz                         â”‚   â”‚
â”‚    â”‚                                                               â”‚   â”‚
â”‚    â”‚    ğŸ“ How to Activate:                                        â”‚   â”‚
â”‚    â”‚       1. Open Adobe After Effects                            â”‚   â”‚
â”‚    â”‚       2. Go to Window â†’ Extensions â†’ Auto Captions Pro       â”‚   â”‚
â”‚    â”‚       3. Click "Activate License"                            â”‚   â”‚
â”‚    â”‚       4. Paste license key and activate                      â”‚   â”‚
â”‚    â”‚                                                               â”‚   â”‚
â”‚    â”‚    [Continue to Download â†’]                                  â”‚   â”‚
â”‚    â”‚                                                               â”‚   â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â”‚ User clicks "Continue"
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 11. REDIRECT TO INSTAGRAM                                               â”‚
â”‚                                                                          â”‚
â”‚     window.location.href = "https://www.instagram.com/mukeshfx";       â”‚
â”‚                                                                          â”‚
â”‚     ğŸ‰ User can start downloading and using Auto Captions Pro           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                            PARALLEL PROCESSES

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                          â”‚
â”‚  FRONTEND (Instant)                 SERVER (Background)                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                  â”‚
â”‚                                                                          â”‚
â”‚  â€¢ License key generated            â€¢ Webhook received                  â”‚
â”‚  â€¢ Shown to user immediately        â€¢ Signature verified                â”‚
â”‚  â€¢ Saved to localStorage            â€¢ License saved to DB               â”‚
â”‚  â€¢ Modal displayed                  â€¢ Email sent                        â”‚
â”‚  â€¢ User can copy/download           â€¢ Logs recorded                     â”‚
â”‚                                                                          â”‚
â”‚  Why this is good:                                                      â”‚
â”‚  âœ… User gets instant gratification                                     â”‚
â”‚  âœ… No waiting for email/webhook                                        â”‚
â”‚  âœ… Can use license even if webhook fails                               â”‚
â”‚  âœ… localStorage backup always available                                â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                              DATA FLOW

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                          â”‚
â”‚  Frontend         â†’  Server          â†’  Razorpay      â†’  User          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€            â”€â”€â”€â”€â”€â”€â”€â”€            â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”€â”€â”€â”€         â”‚
â”‚                                                                          â”‚
â”‚  Click button     â†’  Create order    â†’  Process       â†’  Modal         â”‚
â”‚  Send order req   â†’  Return order_id â†’  Charge card   â†’  License key   â”‚
â”‚  Open Razorpay    â†’                  â†’  Webhook POST  â†’  Email         â”‚
â”‚  Get response     â†’  Verify & save   â†’                â†’  Download      â”‚
â”‚  Show license     â†’  Send email      â†’                â†’  Redirect      â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                           ERROR HANDLING

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                          â”‚
â”‚  Scenario                          Solution                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€                          â”€â”€â”€â”€â”€â”€â”€â”€                             â”‚
â”‚                                                                          â”‚
â”‚  Order creation fails          â†’   Alert user, log error                â”‚
â”‚  Payment fails                 â†’   Show error message, allow retry      â”‚
â”‚  Webhook doesn't receive       â†’   License still shown to user          â”‚
â”‚  Email fails to send           â†’   License still in database            â”‚
â”‚  Database save fails           â†’   Log error, user has localStorage     â”‚
â”‚                                                                          â”‚
â”‚  Key principle: User always gets license key                            â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                          SECURITY MEASURES

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                          â”‚
â”‚  âœ… Order created on server (prevents amount manipulation)              â”‚
â”‚  âœ… Razorpay signature verification (prevents fake webhooks)            â”‚
â”‚  âœ… Environment variables (secrets not in code)                         â”‚
â”‚  âœ… CORS headers (controls access)                                      â”‚
â”‚  âœ… License key unique (ACPRO-XXXXX-XXXXX-XXXXX-XXXXX-XXXXX)           â”‚
â”‚  âœ… Database constraints (prevent duplicates)                           â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                        FILES INVOLVED

Frontend:
â”œâ”€â”€ getpro.html              â†’ Payment page with buttons
â”œâ”€â”€ payment.js               â†’ All payment logic (NEW VERSION)
â””â”€â”€ style.css                â†’ Modal and button styles

Server:
â”œâ”€â”€ api/razorpay/create-order.js   â†’ Creates Razorpay order (YOU CREATE)
â””â”€â”€ api/razorpay/webhook.js        â†’ Handles payment webhook (YOU UPDATE)

External Services:
â”œâ”€â”€ Razorpay                 â†’ Payment gateway
â”œâ”€â”€ Supabase                 â†’ Database for licenses
â””â”€â”€ Resend                   â†’ Email delivery


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
